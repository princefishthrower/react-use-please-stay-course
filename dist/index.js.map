{"version":3,"file":"index.js","sources":["../src/utils/getFavicon.ts","../src/hooks/useInterval.ts","../src/hooks/useFaviconChangeEffect.ts","../src/hooks/useListenToVisibilityChangeOnMount.ts","../src/constants/Constants.ts","../src/enums/AnimationType.ts","../src/hooks/useTitleChangeEffect.ts","../src/hooks/usePleaseStay.ts"],"sourcesContent":["export const getFavicon = () : HTMLLinkElement | null => {\n    const nodeList = document.getElementsByTagName('link');\n    for (let i = 0; i < nodeList.length; i++) {\n      if (\n        nodeList[i].getAttribute('rel') === 'icon' ||\n        nodeList[i].getAttribute('rel') === 'shortcut icon'\n      ) {\n        return nodeList[i];\n      }\n    }\n    return null;\n  }","import { useRef, useEffect } from 'react';\n\nexport const useInterval = (callback: () => void, interval: number, shouldRun: boolean) => {\n    const callbackRef = useRef(callback);\n\n    // Set callbackRef to the latest callback if callback changes\n    useEffect(() => {\n        callbackRef.current = callback;\n    }, [callback])\n\n    // Set up the interval\n    useEffect(() => {\n\n        // Don't schedule if shouldRun is false.\n        if (!shouldRun) {\n            return;\n        }\n\n        const id = setInterval(() => callbackRef.current(), interval);\n\n        return () => clearInterval(id);\n    }, [interval, shouldRun])\n};","import { useEffect, useRef, useState } from \"react\";\nimport { getFavicon } from \"../utils/getFavicon\";\nimport { useInterval } from \"./useInterval\";\n\nexport const useFaviconChangeEffect = (\n  faviconLinks: string[],\n  shouldIterateFavicons: boolean\n) => {\n  const [faviconIndex, setFaviconIndex] = useState(0);\n  const faviconRef = useRef<HTMLLinkElement | null>(getFavicon());\n\n  // at an interval of 500 ms, increment the faviconIndex value\n  useInterval(\n    () => {\n      const nextIndex = faviconIndex + 1;\n      nextIndex === faviconLinks.length\n        ? setFaviconIndex(0)\n        : setFaviconIndex(nextIndex);\n    },\n    500,\n    shouldIterateFavicons\n  );\n\n  // when favicon index changes, set the favicon href to the given link\n  useEffect(() => {\n    faviconRef.current.href = faviconLinks[faviconIndex];\n    faviconRef.current.setAttribute(\"style\", \"transform: rotate(180deg)\");\n  }, [faviconIndex]);\n};\n","import { useEffect } from \"react\";\n\nexport const useListenToVisibilityChangeOnMount = (setShouldToggleTitles: (shouldToggleTitles: boolean) => void) => {\n  // visibilitychange event handler\n  const handleVisibilityChange = () => {\n    setShouldToggleTitles(document.visibilityState !== \"visible\");\n  };\n\n  // on mount of this hook, add the event listener. on unmount, remove it\n  useEffect(() => {\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, []);\n}","export const CHROME_TAB_CHARACTER_COUNT = 30;","export enum AnimationType {\n    LOOP = \"LOOP\",\n    CASCADE = \"CASCADE\",\n    MARQUEE = \"MARQUEE\"\n  }","import { useEffect, useState } from \"react\";\nimport { CHROME_TAB_CHARACTER_COUNT } from \"../constants/Constants\";\nimport { AnimationType } from \"../enums/AnimationType\";\nimport { useInterval } from \"./useInterval\";\n\nexport const useTitleChangeEffect = (\n  titles: string[],\n  shouldIterateTitles: boolean,\n  animationType: AnimationType\n) => {\n  const [titleIndex, setTitleIndex] = useState(0);\n\n  const runLoopIterationLogic = () => {\n    const nextIndex = titleIndex + 1;\n    nextIndex === titles.length ? setTitleIndex(0) : setTitleIndex(nextIndex);\n  };\n\n  const runCascadeIterationLogic = () => {\n    const nextIndex = titleIndex + 1;\n    nextIndex === titles[0].length\n      ? setTitleIndex(0)\n      : setTitleIndex(nextIndex);\n  };\n\n  const runMarqueeIterationLogic = () => {\n    const nextIndex = titleIndex + 1;\n    nextIndex === CHROME_TAB_CHARACTER_COUNT\n      ? setTitleIndex(0)\n      : setTitleIndex(nextIndex);\n  };\n\n  const runLoopTitleLogic = () => {\n    document.title = titles[titleIndex];\n  };\n\n  const runCascadeTitleLogic = () => {\n    document.title = titles[0].substring(0, titleIndex);\n  };\n\n  const runMarqueeTitleLogic = () => {\n    const carryOverCount =\n      titleIndex + titles[0].length - CHROME_TAB_CHARACTER_COUNT;\n  \n    if (carryOverCount > 0) {\n      const spaceText = \"\\u205f​​​\".repeat(\n        CHROME_TAB_CHARACTER_COUNT - titles[0].length\n      );\n      document.title =\n        titles[0].substring(titles[0].length - carryOverCount, titles[0].length) +\n        spaceText +\n        titles[0].substring(0, titles[0].length - carryOverCount);\n    } else {\n      const offset = \"\\u205f​​​\".repeat(titleIndex);\n      document.title = offset + titles[0];\n    }\n  };\n\n  // at an interval of 500 ms, increment the titleIndex value\n  // reset it to 0 if we've reached the end of the list\n  useInterval(\n    () => {\n      switch (animationType) {\n        case AnimationType.CASCADE:\n          return runCascadeIterationLogic();\n        case AnimationType.MARQUEE:\n          return runMarqueeIterationLogic();\n        case AnimationType.LOOP:\n        default:\n          return runLoopIterationLogic();\n      }\n    },\n    500,\n    shouldIterateTitles\n  );\n\n  // Each time titleIndex changes, we set the document.title to the value of titles at that index\n  useEffect(() => {\n    switch (animationType) {\n      case AnimationType.CASCADE:\n        return runCascadeTitleLogic();\n      case AnimationType.MARQUEE:\n        return runMarqueeTitleLogic();\n      case AnimationType.LOOP:\n      default:\n        return runLoopTitleLogic();\n    }\n  }, [titleIndex]);\n};\n","import { useState } from \"react\";\nimport { AnimationType } from \"../enums/AnimationType\";\nimport { useFaviconChangeEffect } from \"./useFaviconChangeEffect\";\nimport { useListenToVisibilityChangeOnMount } from \"./useListenToVisibilityChangeOnMount\";\nimport { useTitleChangeEffect } from \"./useTitleChangeEffect\";\n\nexport const usePleaseStay = (titles: string[], animationType: AnimationType, faviconLinks: string[]) => {\n  const [shouldIterateTitles, setShouldIterateTitles] = useState(false);\n\n  // Sets the shouldToggleTitles value whenever page visibility is lost.\n  // Handles removing the event listener in cleanup as well.\n  useListenToVisibilityChangeOnMount(setShouldIterateTitles);\n\n  // Modifies the document.title of the page whenever shouldToggle is true\n  useTitleChangeEffect(titles, shouldIterateTitles, animationType);\n\n  // Modifies the favicon of the page whenever shouldToggle is true\n  useFaviconChangeEffect(faviconLinks, shouldIterateTitles)\n};\n"],"names":[],"mappings":"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"}